<!DOCTYPE html>
<html>
<head>
    <title>Login</title>
</head>
<body>
    <h1>Login</h1>
    <form onsubmit="return false;">
        <label for="password">Password:</label>
        <input type="password" id="password" required>
        <br>
        <input type="button" value="Login" onclick="sendMessage()">
    </form>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.min.js"></script>
    <script>
        function sendMessage() {
            var password = document.getElementById("password").value;
            var client = new Paho.MQTT.Client("wss://broker.emqx.io:8083/mqtt", "web_client");
            client.connect({
                onSuccess: function () {
                    console.log("Connected to MQTT broker");
                    var message = new Paho.MQTT.Message(password);
                    message.destinationName = "web_input";
                    client.send(message);
                    client.disconnect();
                },
                onFailure: function (message) {
                    console.log("Connection failed: " + message.errorMessage);
                }
            });
            return false;
        }
    </script>
</body>
</html>
