<!DOCTYPE html>
<html>
<head>
    <title>Login</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸˆ²</text></svg>"></link>
</head>
<body>
    <h1>Login</h1>
    <form onsubmit="return false;">
        <label for="password">Password:</label>
        <input type="password" id="password" required>
        <br>
        <input type="button" value="Login" onclick="sendMessage()">
    </form>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.min.js"></script>
    <script>
        var mqttBroker = "broker.emqx.io";
        var mqttPort = 8083;
        function sendMessage() {
            var password = document.getElementById("password").value;
            var client = new Paho.MQTT.Client(mqttBroker, mqttPort,  "client-" + Math.round(Math.random(100000000, 1000000000)*1000000000));
            client.connect({
                onSuccess: function () {
                    console.log("Connected to MQTT broker");
                    var message = new Paho.MQTT.Message(password);
                    message.destinationName = "web_input";
                    client.send(message);
                    client.disconnect();
                },
                onFailure: function (message) {
                    console.log("Connection failed: " + message.errorMessage);
                }
            });
            return false;
        }
    </script>
</body>
</html>
